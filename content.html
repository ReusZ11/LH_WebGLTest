<link rel="stylesheet" href="https://ReusZ11.github.io/LH_WebGLTest/TemplateData/style.css">
<script src="https://ReusZ11.github.io/LH_WebGLTest/Build/LH_WebGLTest.loader.js"></script>
<script type="text/javascript">

const config = {
    dataUrl: "https://ReusZ11.github.io/LH_WebGLTest/Build/LH_WebGLTest.data",
    frameworkUrl: "https://ReusZ11.github.io/LH_WebGLTest/Build/LH_WebGLTest.framework.js",
    codeUrl: "https://ReusZ11.github.io/LH_WebGLTest/Build/LH_WebGLTest.wasm",
    streamingAssetsUrl: "https://ReusZ11.github.io/LH_WebGLTest/StreamingAssets",
    companyName: "Your Company",
    productName: "LH WebGL Test",
    productVersion: "1.0",
};

var gameInstance;
var canvas;

window.addEventListener('load', function() {
    canvas = document.querySelector("#unity-canvas");
    
createUnityInstance(canvas, config, (progress) => {
    const progressBar = document.querySelector("#unity-progress-bar-full");
    progressBar.style.width = (100 * progress) + "%";
    console.log('Loading:', Math.round(progress * 100) + '%');
}).then((instance) => {
    document.querySelector("#unity-loading-bar").style.display = "none";
    gameInstance = instance;
    console.log("Unity game loaded successfully");
    testNutakuIntegration();
});
});

function testNutakuIntegration() {
    if (typeof NutakuGI !== 'undefined') {
        console.log('Nutaku GI2 integration available');
        
        // Получить информацию о пользователе
        NutakuGI.getQuickUserInfo().then(result => {
            if (!result.error) {
                console.log('Nutaku user:', result.nickname);
                // Отправить данные в Unity если нужно
                if (gameInstance) {
                    gameInstance.SendMessage('NutakuService', 'OnNutakuUser', JSON.stringify(result));
                }
            }
        });
    } else {
        console.log('Running outside Nutaku platform');
    }
}

</script>

    <body style="min-height: 1080px">
        <div class="main" id="main">
            <div class="mainLeft"></div>
            <div class="mainRight"></div>
            <div class="webgl-content" id="webglcontent" style="min-height: 1080px">
                <div id="unity-container"  class="unity-desktop">
                    <canvas id="unity-canvas"></canvas>
                </div>
                <div id="LogoBG" class="Logos LogoBG"></div>
                <div id="LogoA"  class="Logos LogoA"></div>
                <div id="LogoB"  class="Logos LogoB"></div>
            </div>
            <div id="Footer" class="Footer" onclick="gameInstance.SetFullscreen(1)"></div>
        </div>
    </body>


    <style>
#unity-loading-bar {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
}
#unity-progress-bar-empty {
    width: 100%;
    height: 18px;
    background: rgba(255,255,255,0.2);
    border-radius: 2px;
}
#unity-progress-bar-full {
    width: 0%;
    height: 100%;
    background: #8cc8ff;
    border-radius: 2px;
    transition: width 0.1s;
}
</style>